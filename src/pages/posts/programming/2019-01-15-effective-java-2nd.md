---

category: 'programming'
date: '2019-01-15'
title: 'effective java 2nd. Joshua Bloch'
description:  '명료하고, 정확하고, 사용이 편하며, 안정적이고, 유연하며, 유지보수가 쉬운 프로그램을 만드는 방법을 다룬다. 그런 프로그램을 만들 수 있게 되고 나면, 필요한 성능을 얻는 것은 상대적으로 쉽다.'
image: '/img/programming/programmer.jpg'
keywords: '이펙티브 자바,effective java,java'
---


## 1 서론

- 명료하고, 정확하고, 사용이 편하며, 안정적이고, 유연하며, 유지보수가 쉬운 프로그램을 만드는 방법을 다룬다. 그런 프로그램을 만들 수 있게 되고 나면, 필요한 성능을 얻는 것은 상대적으로 쉽다.

## 2 객체의 생성과 삭제

### 규칙 1 생성자 대신 정적 팩터리 메소드를 사용할 수 없는지 생각해보라 

- 첫번째 장점은, 생성자와는 달리 이름이 있다는 것이다. 생성자의 인자는 어떤 객체가 생성되는지를 설명 못하지만, 메서드 이름을 잘 짓기만 한다면 사용하기도 쉽고, 클라이언트 코드의 가독성도 높아진다.

- 두번째 장점은, 생성자와 달리 호출할 때마다 새로운 객체를 생성할 필요가 없다는 것이다. 가령 같은 객체를 반복해서 반환할 수 있으므로 객체가 얼마나 어느시점에서 존재할지를 정밀하게 제어할 수 있다.

- 세번째 장점은, 생성자와는 달리 반환값 자료형의 하위 자료형 객체를 반환할 수 있다는 것이다.

- 네 번째 장점은, 형인자 자료형(parameterized type)객체를 만들 때 편리하다는 것이다.
     
     ```java
     // Usually
     Map<String, List<String>> f = new HashMap<String, List<String>>();

     // Good
     public static <K, V> newInstance(){ return new HashMap<K, V>() }; Map<String,List<String>> m = HashMap.newInstacne();
     ```

- 정적 팩터리 메서드만 있다면 가장 큰 문제는 public/protected 생성자가 없어 하위 클래스를 만들 수 없다는 것이다.

### 규칙 2 생성자 인자가 많을 때는 Builder 패턴 적용을 고려하라

- 인자에 따라 생성자를 여러개 만드는 패턴은 인자 수가 늘어나면 사용도 어렵고, 읽기도 어렵다.

- 인자 없는 객체를 만들고 setter 를 호출하는 JavaBeans 패턴이 있다. 그러나 1회 호출로 생성이 끝나지 않아 일관성이 없거나, 변경불가능한 클래스가 아니므로 thread safe 에 대해 고려해야한다. 이를 위해 객체를 freezing 하는 방법은 까다로우며 거의 쓰이지 않는다.

- 빌더로 객체를 생성하면 객체생성 이후 불변한지 필드별로 검사 할 수 있다.

- 요약하자면 빌더 패턴은 인자가 많은 생성자나, 정적 팩터리가 필요한 클래스를 설계 할 때, 특히 대부분의 인자가 선택적 인자인 상황에 유용하다.

### 규칙 3 private 생성자나 enum 자료형은 싱글턴 패턴을 따로도록 설계하라

- 싱글턴을 구현하는 방법이 두가지 있다. 두 방법다 생성자를 private으로 선언하고, 객체는 static 멤버를 통해 이용하는 것이다.

- 팩토리 메소드를 사용하는 방법의 한 가지 장점은, API를 변경하지 않고도 싱글턴 패턴을 포기할 수 있다는 것이다.

- jdk 1.5 부터는 원소가 하나뿐인 enum 자료형을 통해 실글턴을 구현할 수도 있다. 사실 위에 나열한 두가지 방법은 리플렉션을 통해 private 생성자를 호출할 수 있지만, enum 방식은 그럴 수 없다. 아직 널리 사용되는 접근법은 아니다.
    ```java
    public enum Elvis {
        INSTANCE

        public void foo() {...}
    }
    ```